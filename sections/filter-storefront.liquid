{% liquid %}
<div class="search-bar">   
    <form action="{{ routes.search_url }}"> 
        <select id="slct1" name="slct1" onchange="populate(this.id,'slct2')">
            <option value="-Make-">Make</option>
            <option value="Tesla">Tesla</option>
            <option value="Peugeot">Peugeot</option>
            <option value="Mini">Mini</option>
            <option value="Dacia">Dacia</option>
            <option value="Mercedes">Mercedes</option>
            <option value="Audi">Audi</option>
        </select>
            
        <select id="slct2" disabled name="slct2">
            <option value="-Make-">Model</option>      
        </select>

         <select id="year" disabled onChange="update()">
                <option value="en">Year</option>
                <option value="en">2018</option>
                <option value="es">2019</option>
                <option value="ey">2020</option>
                <option value="er">2021</option>
                <option value="eu">2022</option>
        </select>
        <input type="text"
        placeholder="Search"
        name="q"
        id="text"
        class="text-bar"
        disabled
            >
        <input class="shop-car-button" type="submit" value="Shop by car">
    </form>
</div>        

 {% liquid %}

<script>       
    function populate(s1,s2){
        var s1 = document.getElementById(s1);
        var s2 = document.getElementById(s2);
        var s3 = document.getElementById("year");
        var text = document.getElementById('text');
        s2.innerHTML = "";
        s2.removeAttribute("disabled")
        s3.removeAttribute("disabled")
        text.removeAttribute("disabled")
        if(s1.value == "Tesla"){
            var optionArray = ["|--Model--","model y|Model Y","model 3|Model 3", "Tesla Y Sunshade|tesla y sunshade"];
        } else if(s1.value == "Dacia"){
            var optionArray = ["|--Model--","duster|Duster"];
        } else if(s1.value == "Mini"){
            var optionArray = ["|--Model--","clubman|Clubman","countryman|Countryman"];
        } else if(s1.value == "Peugeot"){
        var optionArray = ["|--Model--","3008|3008"];
        } else if(s1.value == "Audi"){
        var optionArray = ["|--Model--","e-tron gt cargo|E-tron GT Cargo", "e-tron floorliner|E-tron Floorliner", "e-tron sUV floorliner"|"R-tron SUV Floorliner"];
        } else if(s1.value == "Mercedes"){
            var optionArray = ["|--Model--","g-class floorliner 1st & 2nd row|G-Glass Floorliner 1st & 2nd row"];
        }    
        for(var option in optionArray){
            var pair = optionArray[option].split("|");
            var newOption = document.createElement("option");
            newOption.value = pair[0];
            newOption.innerHTML = pair[1];
            s2.options.add(newOption);
        }
}
       
function update () {
       
    var make = document.getElementById('slct1');
    var optionMake = make.options[make.selectedIndex];
    
    var model = document.getElementById('slct2');
    var optionModel = model.options[model.selectedIndex];
    
    var year = document.getElementById('year');
    var optionYear = year.options[year.selectedIndex];
          
    document.getElementById('text').value = optionMake.text + " " + optionModel.text + " " + optionYear.text;
       
    }
       
</script>   
            
            
<style>
    .search-bar {      
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
    margin-bottom: 30px;  
    }
    .search-bar select {
    padding: 1em
    }
    .search-bar input {
    padding: 1em;
    }
    .shop-car-button {
    background: #e32020;
    border: none;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    }       
</style>
    
<script src="script.js"></script>

{% schema %}
  {
    "name": "advance filter",
    "settings": [
	  {
        "type": "paragraph",
        "content": "t:sections.advanced_filter.content"
      },
      {
        "type": "header",
        "content": "t:sections.text.label"
      },
      {
        "type": "text",
        "id": "title",
        "label": "t:sections.heading.label",
        "default": "Advanced filter"
      },
      {
        "type": "text",
        "id": "sub_title",
        "label": "t:sections.subheading.label",
		"default": "Filter products using tags or storefront filters"
      },
      {
        "type": "header",
        "content": "t:sections.options.label"
      },
      {
        "type": "checkbox",
        "id": "form_layout",
        "label": "t:sections.horizontal_form.label",
        "default": true
      },
      {
        "type": "text",
        "id": "directory_label",
        "label": "t:sections.first_dropdown.label",
		"default": "Select"
      },
      {
        "type": "text",
        "id": "directory_label_select",
        "label": "t:sections.remaining.label",
		"default": "Select"
      },
      {
        "type": "text", 
        "id": "button",
        "label": "t:sections.button.label",
		"default": "Search"
      },
      {
        "type": "header",
        "content": "t:sections.background.label"
      },
      {
        "type": "checkbox",
        "id": "use_background_img",
        "label": "t:sections.show_image.label",
        "default": true
      }, 
      {
        "type": "image_picker",
        "id": "background_img",
        "label": "t:sections.image.label",
        "info": "t:sections.image.desktop.info"
      },
      {
        "type": "checkbox",
        "id": "font_color",
        "label": "t:sections.white_text.label",
        "default": true
      },
	  {
       "type": "checkbox",
       "id": "full_width",
       "label": "t:sections.full_width.label",
       "default": true
      },
      {
        "type": "range",
        "id": "padding",
        "min": 5,
        "max": 100,
        "step": 5,
        "unit": "%",
        "label": "t:sections.height.label",
        "default": 50
      },
	  {
        "type": "color",
        "id": "background_img_overlay",
        "label": "t:sections.overlay.label"
      },
      {
        "type": "range",
        "id": "background_img_overlay_opacity",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "%",
        "label": "t:sections.opacity.label",
        "default": 0
      },
	  {
        "type": "select",
        "id": "include_color",
        "label": "t:sections.background_color.label",
        "default": "color-primary",
        "options": [
          {
            "value": "color-primary",
            "label": "t:sections.background_color.primary"
          },
          {
            "value": "color-secondary",
            "label": "t:sections.background_color.secondary"
          },
          {
            "value": "color-none",
            "label": "t:sections.background_color.none"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "enable_padding",
        "label": "t:sections.enable_bottom_padding.label",
        "default": false
      }
    ],
    "blocks": [
      {
        "type": "collection",
        "name": "car filter",
        "settings": [ 
          {
             "type": "collection",
             "id": "collection",
             "label": "t:sections.collection.label"
          },
          {
            "type": "text",
            "id": "title",
            "label": "t:sections.title.label"
          },
          {
            "type": "text",
            "id": "tag_1",
            "label": "t:sections.advanced_filter.filter_1"
          },
          {
            "type": "text",
            "id": "tag_2",
            "label": "t:sections.advanced_filter.filter_2"
          },
          {
            "type": "text",
            "id": "tag_3",
            "label": "t:sections.advanced_filter.filter_3"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "car advance filter"
      }
    ]
  }
{% endschema %}